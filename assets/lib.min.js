/*! Vimeo-Carousel-Gallery - v1.2.0 - 2014-01-09
* Show videos from Vimeo into a chic gallery with jQuery
* https://github.com/pinceladasdaweb/Vimeo-Carousel-Gallery
* Copyright (c) 2014 Pedro Rogerio; */
var Vimeo={init:function(a){this.container=a.container,this.attach(),this.fetch()},getId:function(a){var b=a.match(/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/);return b?b[3]:void 0},attach:function(){var a=this,b=a.getId(data.main),c=['<div class="featured">','<iframe src="http://player.vimeo.com/video/'+b+'" width="960" height="540" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen />',"</div>",'<div class="carousel-container cf">','<span class="shadow shadow-left" />','<span class="prev controll" />','<div class="carousel-inner">','<ul class="slider cf" />',"</div>",'<span class="next controll" />','<span class="shadow shadow-right" />',"</div>"];if(!b)throw new Error("The url of the video page is wrong or not defined");$(c.join("")).appendTo(a.container)},fetch:function(){var a,b,c=this,d=data.videos,e=$(".carousel-container");for(a=0,b=d.length;b>a;a+=1){var f=c.getId(d[a].url);$.getJSON("http://www.vimeo.com/api/v2/video/"+f+".json?callback=?",{format:"json"}).done(function(a){var b=a[0].url,c=a[0].thumbnail_large,d=a[0].title,f=['<li class="thumb">','<a title="'+d+'" href="'+b+'">','<img src="'+c+'" alt="'+d+'" title="'+d+'">',"</a>","</li>"].join("");e.find(".slider").append(f)})}$(window).load(function(){c.carousel()})},carousel:function(){var a=this,b=$(".slider"),c=$(".carousel-container .controll"),d=$(".featured"),e=b.find("li").length;if(e>3){var f=$(".slider li").outerWidth(!0);c.css({display:"block"}),b.css({left:"-"+f+"px"}),b.find("li:first").before(b.find("li:last")),$(a.container).on("click",".carousel-container .controll",function(){var a=$(this);if(a.hasClass("next")){var c=parseInt(b.css("left"))-f;$(".slider:not(:animated)").animate({left:c},500,function(){b.find("li:last").after(b.find("li:first")),b.css({left:"-"+f+"px"})})}else{var c=parseInt(b.css("left"))+f;$(".slider:not(:animated)").animate({left:c},500,function(){b.find("li:first").before(b.find("li:last")),b.css({left:"-"+f+"px"})})}})}$(a.container).on("click",".thumb",function(c){c.preventDefault();var e=$(this).find("a").attr("href");d.find("iframe").attr({src:"http://player.vimeo.com/video/"+a.getId(e)+"?autoplay=1"}),b.find("li").removeClass("current"),$(this).addClass("current")})}};